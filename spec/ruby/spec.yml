---
name: ruby env
needs: dev tools
steps:
  - brew:
      brews:
        - chruby
        - ruby-install
      casks:
        - rubymine
  - name: ~/.ruby-version
    link:
      src: ruby-version
      dest: ${HOME}/.ruby-version
  - name: ~/.irbrc
    link:
      src: irbrc
      dest: ${HOME}/.irbrc
---
name: ruby
needs: ruby env
unless: chruby $(cat "${HOME}/.ruby-version")
run: >
  VERSION=$(cat "${HOME}/.ruby-version")
  /opt/homebrew/bin/ruby-install ${VERSION}

